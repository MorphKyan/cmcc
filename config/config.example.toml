# 语音活动检测 (VAD) 配置
[vad]
chunk_size = 200
sample_rate = 16000
model = "fsmn-vad"
# VAD 最大切割音频时长(ms)
max_single_segment_time = 20000
save_audio_segments = false
# 历史缓冲区最大时长(秒)
history_buffer_duration_sec = 30
# 音频块队列最大容量
chunk_queue_maxsize = 10000
# 提取音频后保留的安全边界(秒)
safety_margin_sec = 5
# 语音/噪声阈值，越高越难触发VAD(排除噪声)，默认0.6
speech_noise_thres = 0.8
# 绝对静音分贝阈值，低于此值强制判定为静音（默认-100.0，相当于不生效）
decibel_thres = -100.0

# FunASR 语音识别配置
[asr]
model = "iic/SenseVoiceSmall"
language = "zh"
use_itn = true
batch_size_s = 60.0
merge_vad = false
merge_length_s = 15.0
hotwords = [
    "打开", "关闭", "播放", "暂停", "继续", "停止",
    "跳转", "快进", "后退", "音量", "大声", "小声",
    "提高", "降低", "静音", "门", "视频", "PPT",
    "首页", "上一页", "下一页", "末页", "第几页",
    "看一下", "带我去", "展厅", "区域", "设备"
]

# Nano ASR 推荐配置 (Fun-ASR-Nano-2512)
#model = "FunAudioLLM/Fun-ASR-Nano-2512"
#language = "中文" # 支持：中文、英文、日文
#batch_size = 1
#itn = true
# use_vad = false
# vad_model = "fsmn-vad"
# vad_max_single_segment_time = 30000

# 数据文件路径配置
[data]
media_data_path = "./data/media.csv"
devices_data_path = "./data/devices.csv"
areas_data_path = "./data/areas.csv"
doors_data_path = "./data/doors.csv"

# RAG (检索增强生成) 配置
[rag]
# RAG 提供商选择: "ollama", "modelscope", 或 "dashscope"
provider = "ollama"
chroma_db_dir = "./chroma_db"
top_k_results = 10
# 分类检索 top_k 配置
door_top_k = 30
media_top_k = 30
device_top_k = 30
# Ollama 配置
ollama_embedding_model = "qwen3-embedding:0.6b"
ollama_base_url = "http://127.0.0.1:11434"
# ModelScope 配置
modelscope_embedding_model = "Qwen/Qwen3-Embedding-0.6B"
modelscope_base_url = "https://api-inference.modelscope.cn/v1"
modelscope_api_key = "ms-b5d21340-4551-4343-86e8-e1c1430ae1f9"
# DashScope 配置
dashscope_embedding_model = "text-embedding-v4"
dashscope_base_url = "https://dashscope.aliyuncs.com/compatible-mode/v1"
dashscope_api_key = "sk-5d29b7ca2f074ffea3b7de63c9348ee5"

# 大语言模型 (LLM) 配置
[llm]
# LLM 提供商选择: "ollama" 或 "modelscope"
provider = "modelscope"
# ollama 配置
ollama_model = "qwen3:8b"
ollama_base_url = "http://127.0.0.1:11434"
# ModelScope 配置
modelscope_model = "Qwen/Qwen3-30B-A3B-Instruct-2507"
modelscope_base_url = "https://api-inference.modelscope.cn/v1"
modelscope_api_key = "ms-b5d21340-4551-4343-86e8-e1c1430ae1f9"

# Validation and retry settings
max_validation_retries = 2
retry_delay = 0.1
# Network timeout settings
request_timeout = 10
connection_timeout = 10

# 火山引擎配置 (备用)
[volcengine]
ark_api_key = "aabd9362-9ca8-43ac-bb4d-828f0ba98f4d"
ark_base_url = "https://ark.cn-beijing.volces.com/api/v3"
llm_model_name = "doubao-seed-1-6-flash-250715"

# AEP中控系统配置
[aep]
#base_url = "http://114.242.9.52:9088/aep/voice/command"
base_url = "http://host.docker.internal:8088/aep/voice/command"
sign_salt = "cE0aM0qC0dB4aD2"
request_timeout = 10
